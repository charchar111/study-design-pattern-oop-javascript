# 컨셉

## 목적

옵저버 패턴 공부용

# 내용

## 기존 상황

기상 스테이션 객체는 외부 데이터를 받아서 기상 데이터를 업데이트하고, 이 데이터를 현재 날씨 화면에 반영해주어야 한다.

다만, 화면 객체는 추가로 늘어날 수 있다.

따라서, 기상 스테이션 객체와 함께, 현재 날씨 화면 객체를 구현하되, 데이터 갱신 대상이 손쉽게 추가되고 제거될 수 있도록 확장에 유연한 로직을 만들어야 한다.

## 요구사항1

- 기상 스테이션 객체, 현재 날씨 화면 객체 구현

## 요구사항2

- 날씨 통계 객체 구현 시, 기상 스테이션 객체의 코드를 수정하지 않고 추가할 수 있는 방향 구상

## 분석

### 방법1. 직접 데이터 갱신 반영

- 한 가지 방법은 데이터 주체인 기상 스테이션에서 데이터 업데이트 시 화면 객체들에 변경 값을 직접 전달해주는 것이다.

#### 한계

- 이 방식에는 문제가 있다.

- 구현에 대한 강한 결합

  - 기상 스테이션은 자신에게 의존하는 화면 객체의 구체적인 형태를 알게 된다. 따라서,

- OCP 원칙 깨짐

  - 만약 추가적인 화면이 등장한다면 기상 스테이션 객체를 직접 수정하여야 한다. 이는 기존에 잘 돌아가던 코드에 파급 효과를 일으킨다.

- **여기서 중요한 건, 데이터의 주체 객체와 의존 객체는 서로 굳이 구체적인 구현으로 결합될 필요가 없다는 점이다.**
  - 단지, 데이터 업데이트와 알림으로만 연결되면 된다. 이 부분을 구체적인 구현에 묶이지 않고 캡슐화할 수 있는 방법이 바로 옵저버 패턴이다.

### 선택한 방법. 옵저버 패턴

#### 개요

- 객체의 상태가 변경되면, 이 객체와 연결되어 있는 다른 객체에게 변경이 연락이 가며, 의존 객체에서도 변경을 반영하는 패턴

- 데이터의 주체와 의존 객체는 각각 subscribe, observer 인터페이스를 상속하며, 인터페이스를 기반으로 의존한다.

  - => 이를 통해 양자는 구체적인 구현에 묶이지 않는다.

- 주제는 단지 자신이 데이터 변경을 알려줄 observer만 받으며, 업데이트를 알려주기만 한다. 따라서, 자신의 옵저버가 구체적으로 무엇인지 몰라도 된다.

#### 푸시 구조

- 푸시 구조란, 업데이트 시, 업데이트 상태 값을 각 옵저버의 update 콜백에 직접 넣어주는 형태
  옵저버는 전달받은 인자를 처리하기만 하면 된다.

- 이 구조는 옵저버가 전달받은 인자를 처리하기만 하면 된다.

#### 풀 구조

- 풀 구조란, 업데이트 시, 주제는 변경을 알리며 update를 호출하기만 함.

- 업데이트 함수에서 데이터 갱신을 처리하는 건 각 옵저버가 직접 수행

- 이 구조는 옵저버가 주제를 좀 더 직접 다뤄야 하는 책임이 커지지만, 단일 업데이트에서 다수의 주제를 구독하고 유연하게 처리하기 좋음.
  - 원하는 데이터만 선택하여 갱신할 수 있음
